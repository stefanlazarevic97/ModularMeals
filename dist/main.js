!function(){"use strict";var t={d:function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};!function(){function e(t,e,n,a,i){t.append("text").attr("x",n/2).attr("y",10).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").style("fill","#093527");var r=Math.min(n,a)/2,o=d3.scaleOrdinal().domain(e.map((t=>t.name))).range(["#7CC0AB","#458F77","#244C3F"]),l=d3.pie().value((t=>t.value)).sort(null),d=d3.arc().innerRadius(0).outerRadius(r),u=d3.arc().outerRadius(.6*r).innerRadius(.6*r),s=t.append("g").attr("transform","translate("+n/2+","+a/2+")").selectAll(".arc").data(l(e)).enter().append("g").attr("class","arc");s.append("path").style("fill",(t=>o(t.data.name))).transition().delay(((t,e)=>500*e)).duration(500).attrTween("d",(function(t){var e=d3.interpolate(t.startAngle+.1,t.endAngle);return function(n){return t.endAngle=e(n),d(t)}})),s.each((function(t){var e=d3.select(this).append("text").attr("transform",(t=>"translate("+u.centroid(t)+")")).style("text-anchor","middle").style("font-size","12px").style("fill","Carbohydrates"===t.data.name?"#EAF5F2":"#093527"),n=t.data.name+": "+parseFloat(t.data.value).toFixed(0)+" g",a=[];"Carbohydrates"===t.data.name?(isNaN(i.Fiber)||a.push("Fiber: "+parseFloat(i.Fiber).toFixed(0)+" g"),isNaN(i.Sugar)||a.push("Sugar: "+parseFloat(i.Sugar).toFixed(0)+" g")):"Fat"===t.data.name&&(isNaN(i.Saturated)||a.push("Saturated Fat: "+parseFloat(i.Saturated).toFixed(0)+" g"),isNaN(i.Trans)||a.push("Trans Fat: "+parseFloat(i.Trans).toFixed(0)+" g")),e.append("tspan").style("font-weight","bold").attr("dy","0.6em").text(n),a.forEach((function(n,a){var i="#093527";"Carbohydrates"===t.data.name&&(n.includes("Fiber")||n.includes("Sugar"))&&(i="#EAF5F2"),e.append("tspan").attr("x",0).attr("dy","1.2em").style("font-weight","normal").style("fill",i).text(n)}))}))}function n(t,e,n,a){t.append("text").attr("x",n/2).attr("y",20).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold");n=n-60-20,a=a-20-70,e=e.filter((t=>!isNaN(parseFloat(t.value))));var i=d3.scaleBand().range([0,n]).padding(.1).domain(e.map((t=>t.name))),r=d3.scaleLinear().range([a,0]).domain([0,d3.max(e,(t=>parseFloat(t.value)))]),o=t.append("g").attr("transform","translate(60,20)");o.append("g").call(d3.axisLeft(r)).append("text").attr("fill","#244C3F").attr("transform","rotate(-90)").attr("y",-50).attr("dy","1em").attr("text-anchor","end").style("font-weight","bold").text("% of recommended daily intake"),o.append("g").attr("transform","translate(0,"+a+")").call(d3.axisBottom(i)).selectAll("text").style("text-anchor","end").style("fill","#244C3F").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)"),o.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",(t=>i(t.name))).attr("y",a).attr("width",i.bandwidth()).attr("height",0).attr("fill","#244C3F").transition().duration(1e3).attr("y",(t=>r(parseFloat(t.value)))).attr("height",(t=>a-r(parseFloat(t.value))))}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}t.d({},{Io:function(){return b},Hm:function(){return y}});const i={Cholesterol:300,Sodium:2300,Potassium:4700,Magnesium:420,Calcium:1e3,Iron:18,Zinc:11,VitaminA:900,VitaminE:15,VitaminC:90,VitaminB6:1.7,VitaminB12:2.4,VitaminD:20,VitaminK:120},r={ENERC_KCAL:"Calories",PROCNT:"Protein",FAT:"Fat",FASAT:"Saturated Fat",FATRN:"Trans Fat",CHOCDF:"Carbohydrates",SUGAR:"Sugar",FIBTG:"Fiber"},o={CA:"Calcium",CHOLE:"Cholesterol",FE:"Iron",K:"Potassium",MG:"Magnesium",NA:"Sodium",TOCPHA:"Vitamin E",VITA_RAE:"Vitamin A",VITB6A:"Vitamin B6",VITB12:"Vitamin B12",VITC:"Vitamin C",VITD:"Vitamin D",VITK1:"Vitamin K",ZN:"Zinc"};function l(t,e,n,a){let i={...t};return Object.keys(e.totalNutrients).forEach((l=>{if(o[l]&&t[o[l]]){let r=Number(e.totalNutrients[l].quantity)/a/n[o[l]]*100,d=Number(t[o[l]])-r;d<0&&(d=0),i[o[l]]=d.toFixed(0)}if(r[l]&&t[r[l]]){let n=Number(t[r[l]])-Number(e.totalNutrients[l].quantity)/a;n<0&&(n=0),i[r[l]]=n.toFixed(0)}})),i}const d="0cc0aea0",u="1e077dc53566f535c8e43010f6e729d5",s=document.querySelector(".search-result");const c=document.querySelector(".search-form"),m="9571bf1b",p="fd421218cb6bedd9fe774a93dd05e16e";let y,h=[];async function b(t,c){let v={q:t.searchQuery.length>0?t.searchQuery:void 0,time:t.minTime&&t.maxTime?`${t.minTime}-${t.maxTime}`:t.minTime?`${parseFloat(t.minTime)}+`:t.maxTime?`${t.maxTime}`:void 0,calories:t.minCalories&&t.maxCalories?`${t.minCalories}-${t.maxCalories}`:t.minCalories?`${t.minCalories}+`:t.maxCalories?`${t.maxCalories}`:void 0,"nutrients[CHOCDF]":t.minCarbs&&t.maxCarbs?`${t.minCarbs}-${t.maxCarbs}`:t.minCarbs?`${t.minCarbs}+`:t.maxCarbs?`${t.maxCarbs}`:void 0,"nutrients[FAT]":t.minFat&&t.maxFat?`${t.minFat}-${t.maxFat}`:t.minFat?`${t.minFat}+`:t.maxFat?`${t.maxFat}`:void 0,"nutrients[PROCNT]":t.minProtein&&t.maxProtein?`${t.minProtein}-${t.maxProtein}`:t.minProtein?`${t.minProtein}+`:t.maxProtein?`${t.maxProtein}`:void 0,health:t.dietRestrictions.length>0?t.dietRestrictions:void 0,cuisineType:t.cuisineType?a(t.cuisineType):void 0,mealType:t.mealType||void 0,excluded:t.excludedIngredients.length>0?t.excludedIngredients:void 0},x=Object.keys(v).filter((t=>void 0!==v[t])).flatMap((t=>Array.isArray(v[t])?v[t].map((e=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)):`${encodeURIComponent(t)}=${encodeURIComponent(v[t])}`)).join("&"),f=`https://api.edamam.com/api/recipes/v2?type=public&app_id=${m}&app_key=${p}&${x}&random=true`;const g=await fetch(f),F=await g.json();h=c?h.concat(F.hits.filter((t=>t.recipe.image))):F.hits.filter((t=>t.recipe.image)),function(t){let c="";c+='\n        <button class="find-more-recipes-button">\n            <ion-icon class="refresh-icon" name="refresh-outline"></ion-icon>\n        </button>\n    ',t.map(((t,e)=>{const n=(t.recipe.calories/t.recipe.yield).toFixed(0),a=(t.recipe.totalNutrients.CHOCDF.quantity/t.recipe.yield).toFixed(0),i=(t.recipe.totalNutrients.PROCNT.quantity/t.recipe.yield).toFixed(0),r=(t.recipe.totalNutrients.FAT.quantity/t.recipe.yield).toFixed(0);c+=`\n            <div class="item">\n                <img src="${t.recipe.image}" alt="${t.recipe.label}">\n                \n                <div class="recipe-info">\n                    <h1 class="title">${t.recipe.label}</h1>\n                    <div class="button-container">\n                        <a class="view-recipe-button" href="${t.recipe.url}" target="_blank">View Recipe</a>\n                        <button class="modify-recipe-button" data-recipe-id="${e}">Modify Recipe</button>\n                    </div>\n                    <div class="servings">Servings: ${t.recipe.yield.toFixed(0)}</div>\n                </div>\n\n                <table class="item-data">\n                    <thead>\n                        <tr>\n                            <th>Nutrient</th>\n                            <th>Value/Serving</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>Calories</td>\n                            <td>${n}</td>\n                        </tr>\n                        <tr>\n                            <td>Carbohydrates</td>\n                            <td>${a}g</td>\n                        </tr>\n                        <tr>\n                            <td>Protein</td>\n                            <td>${i}g</td>\n                        </tr>\n                        <tr>\n                            <td>Fat</td>\n                            <td>${r}g</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        `}));const m=document.querySelector(".find-more-recipes-button");m&&m.remove(),s.innerHTML=c,document.querySelector(".find-more-recipes-button").addEventListener("click",(()=>b(y,!0))),document.querySelector(".search-form").style.display="none",document.querySelector(".back-to-search").classList.remove("hidden"),document.querySelector(".back-to-search").classList.add("visible"),document.querySelector(".back-to-search").removeAttribute("disabled"),document.querySelectorAll(".modify-recipe-button").forEach((c=>{c.addEventListener("click",(async c=>{const m=c.target.dataset.recipeId,p=t[m].recipe;s.innerHTML="",s.style.display="none",document.querySelector(".search-form").innerHTML="";let y=function(t){let e={};return t.ingredients.forEach((t=>{e[t.food]=t.weight})),e}(p),h=function(t,e){let n=t.yield;return{Calories:(t.calories/n).toFixed(0),Protein:(t.totalNutrients.PROCNT.quantity/n).toFixed(0),Fat:(t.totalNutrients.FAT.quantity/n).toFixed(0),Saturated:(t.totalNutrients.FASAT.quantity/n).toFixed(0),Trans:(t.totalNutrients.FATRN.quantity/n).toFixed(0),Carbohydrates:(t.totalNutrients.CHOCDF.quantity/n).toFixed(0),Sugar:(t.totalNutrients.SUGAR.quantity/n).toFixed(0),Fiber:(t.totalNutrients.FIBTG.quantity/n).toFixed(0),Cholesterol:(t.totalNutrients.CHOLE.quantity/i.Cholesterol/n*100).toFixed(0),Sodium:(t.totalNutrients.NA.quantity/i.Sodium/n*100).toFixed(0),Potassium:(t.totalNutrients.K.quantity/i.Potassium/n*100).toFixed(0),Magnesium:(t.totalNutrients.MG.quantity/i.Magnesium/n*100).toFixed(0),"Vitamin A":(t.totalNutrients.VITA_RAE.quantity/i.VitaminA/n*100).toFixed(0),"Vitamin E":(t.totalNutrients.TOCPHA.quantity/i.VitaminE/n*100).toFixed(0),"Vitamin C":(t.totalNutrients.VITC.quantity/i.VitaminC/n*100).toFixed(0),"Vitamin B6":(t.totalNutrients.VITB6A.quantity/i.VitaminB6/n*100).toFixed(0),"Vitamin B12":(t.totalNutrients.VITB12.quantity/i.VitaminB12/n*100).toFixed(0),"Vitamin D":(t.totalNutrients.VITD.quantity/i.VitaminD/n*100).toFixed(0),"Vitamin K":(t.totalNutrients.VITK1.quantity/i.VitaminK/n*100).toFixed(0),Calcium:(t.totalNutrients.CA.quantity/i.Calcium/n*100).toFixed(0),Iron:(t.totalNutrients.FE.quantity/i.Iron/n*100).toFixed(0),Zinc:(t.totalNutrients.ZN.quantity/i.Zinc/n*100).toFixed(0)}}(p);var b=document.querySelector(".pie-chart"),v=document.querySelector(".bar-chart");document.querySelector(".pie-chart").style.display="block",document.querySelector(".bar-chart").style.display="block";var x=document.querySelector(".ingredients-list");x.innerHTML="";var f=document.querySelector(".calories");f.innerHTML=`Calories per Serving: ${h.Calories}`;let g=`\n                <a class="view-selected-recipe-button" href="${p.url}" target="_blank">${p.label}</a>\n            `;g+="\n                <table>\n                    <tr>\n                        <th>Ingredient</th>\n                        <th>Weight (g)</th>\n                        <th>Actions</th>\n                    </tr>\n                ",Object.entries(y).forEach((t=>{let[e,n]=t;g+=`\n                    <tr>\n                        <td>${a(e)}</td>\n                        <td>${Math.floor(n)}</td>\n                        <td>\n                            <button class="remove-button">Remove Ingredient</button>\n                        </td>\n                    </tr>\n                `})),g+='\n                </table>\n                <div class="add-ingredient-div">\n                    <input type="text" class="ingredient-input" placeholder="Enter ingredient">\n                    <input type="number" class="weight-input" placeholder="Enter weight in grams">\n                    <button class="add-button">Add Ingredient</button>\n                </div>\n            ',x.innerHTML=g,Object.keys(h).map((t=>({name:t,value:h[t]})));const F=300,C=300;let q=d3.create("svg").attr("width",F).attr("height",C);var S=["Protein","Fat","Carbohydrates"];e(q,S.map((t=>({name:t,value:h[t]}))),F,C,h),b.append(q.node());let T=d3.create("svg").attr("width",F).attr("height",C);var N=["Cholesterol","Sodium","Potassium","Magnesium","Calcium","Iron","Zinc","VitaminA","VitaminE","VitaminC","VitaminB6","VitaminB12","VitaminD","VitaminK"];n(T,N.map((t=>({name:t,value:h[t]}))),F,C),v.append(T.node()),document.querySelectorAll(".remove-button").forEach((t=>{t.addEventListener("click",(async function(t){const a=t.target.parentElement.parentElement.children[0].textContent,r=t.target.parentElement.parentElement.children[1].textContent,o=await fetch(`https://api.edamam.com/api/nutrition-data?app_id=${d}&app_key=${u}&nutrition-type=cooking&ingr=${a}-${r}g`),s=await o.json();h=l(h,s,i,p.yield),f.innerHTML=`Total Calories: ${h.Calories}`,q.selectAll("*").remove(),e(q,S.map((t=>({name:t,value:h[t]}))),F,C,h),T.selectAll("*").remove(),n(T,N.map((t=>({name:t,value:h[t]}))),F,C),t.target.parentElement.parentElement.remove()}))})),document.querySelector(".add-button").addEventListener("click",(async()=>{const t=document.querySelector(".ingredient-input").value,s=document.querySelector(".weight-input").value;if(!t||!s)return void alert("Please fill both ingredient and weight fields.");const c=await fetch(`https://api.edamam.com/api/nutrition-data?app_id=${d}&app_key=${u}&nutrition-type=cooking&ingr=${t}-${s}g`),m=await c.json();h=function(t,e,n,a){let i={...t};return Object.keys(e.totalNutrients).forEach((l=>{if(o[l]&&t[o[l]]){let r=Number(e.totalNutrients[l].quantity)/a/n[o[l]]*100,d=Number(t[o[l]])+r;i[o[l]]=d.toFixed(0)}if(r[l]&&t[r[l]]){let n=Number(t[r[l]])+Number(e.totalNutrients[l].quantity)/a;i[r[l]]=n.toFixed(0)}})),i}(h,m,i,p.yield);const y=document.createElement("tr");y.innerHTML=`\n                    <td>${a(t)}</td>\n                    <td>${Math.floor(s)}</td>\n                    <td>\n                        <button class="remove-button">Remove Ingredient</button>\n                    </td>\n                `,document.querySelector("table").appendChild(y),f.innerHTML=`Total Calories: ${h.Calories}`,q.selectAll("*").remove(),e(q,S.map((t=>({name:t,value:h[t]}))),F,C,h),T.selectAll("*").remove(),n(T,N.map((t=>({name:t,value:h[t]}))),F,C),document.querySelectorAll(".remove-button").forEach((t=>{t.addEventListener("click",(async function(t){const a=t.target.parentElement.parentElement.children[0].textContent,r=t.target.parentElement.parentElement.children[1].textContent,o=await fetch(`https://api.edamam.com/api/nutrition-data?app_id=${d}&app_key=${u}&nutrition-type=cooking&ingr=${a}-${r}g`),s=await o.json();h=l(h,s,i,p.yield),f.innerHTML=`Total Calories: ${h.Calories}`,q.selectAll("*").remove(),e(q,S.map((t=>({name:t,value:h[t]}))),F,C,h),T.selectAll("*").remove(),n(T,N.map((t=>({name:t,value:h[t]}))),F,C),t.target.parentElement.parentElement.remove()}))}))}))}))}))}(F.hits)}c.addEventListener("submit",(t=>{t.preventDefault(),t.target,y={searchQuery:document.querySelector('input[type="text"]').value,minTime:document.querySelector("#min-time-input").value,maxTime:document.querySelector("#max-time-input").value,minCalories:document.querySelector("#min-calories-input").value,maxCalories:document.querySelector("#max-calories-input").value,minCarbs:document.querySelector("#min-carbs-input").value,maxCarbs:document.querySelector("#max-carbs-input").value,minFat:document.querySelector("#min-fat-input").value,maxFat:document.querySelector("#max-fat-input").value,minProtein:document.querySelector("#min-protein-input").value,maxProtein:document.querySelector("#max-protein-input").value,mealType:document.querySelector(".meal-type-input").value,cuisineType:document.querySelector(".cuisine-input").value,dietRestrictions:Array.from(document.querySelectorAll('.dietary-restrictions input[type="checkbox"]:checked')).map((t=>t.value))||[],excludedIngredients:document.querySelector(".ingredient-search-field").querySelector('input[type="text"]').value.split(",").map((t=>t.trim())).filter((t=>t.length>0))||[]},b(y,!1)})),document.querySelector(".back-to-search").addEventListener("click",(()=>{location.reload()}));var v=document.querySelector(".modal"),x=document.querySelector(".instructions-button"),f=document.getElementsByClassName("close")[0];x.onclick=function(){v.style.display="block"},f.onclick=function(){v.style.display="none"},window.onclick=function(t){t.target==v&&(v.style.display="none")}}()}();
//# sourceMappingURL=main.js.map